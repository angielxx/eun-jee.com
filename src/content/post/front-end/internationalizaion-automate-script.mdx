---
title: 'êµ­ì œí™”ë¥¼ ìœ„í•œ í…ìŠ¤íŠ¸ í‚¤ ê´€ë¦¬ ìë™í™”í•˜ê¸° (feat. react-i18next, google spreadsheet)'
description: i18next-scannerì™€ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ë¥¼ í™œìš©í•˜ì—¬ í…ìŠ¤íŠ¸ í‚¤ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë…¸ê°€ë‹¤(?)ë¥¼ ìë™í™”í•´ë³´ì.
date: 2023-12-02
type: Post
---

ì˜¤ëŠ˜ì€ ì‹¤ë¬´ì™€ ê´€ë ¨í•´ì„œëŠ” ì²«ë²ˆì§¸ ê¸€ì…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ í‚¤ë¥¼ ì •ë¦¬í•˜ë©´ì„œ ìë™í™”ë¥¼ ë„ì…í–ˆëŠ”ë°, ì´ë¥¼ êµ¬í˜„í•˜ë©´ì„œ í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡° ë•Œë¬¸ì— ì—¬íƒ€ ë¸”ë¡œê·¸ ê¸€ì—ì„œ ë³¸ ê²ƒê³¼ ë‹¬ë¦¬ ì¶”ê°€ì ì¸ ì„¤ì •ì´ ë” í•„ìš”í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì €ì²˜ëŸ¼ ì¶”ê°€ì ì¸ ì„¤ì •ì´ ë” í•„ìš”í•˜ì‹  ë¶„ë“¤ê»˜ ë„ì›€ì´ ë˜ê¸¸ ë°”ë¼ë©°, ì œ ìƒí™©ê³¼ ê·¸ë¥¼ í•´ê²°í•œ ë°©ë²•ì„ ì†Œê°œí•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

# ë„ì… ë°°ê²½

í•œ ìŠ¤íƒ€íŠ¸ì—…ì—ì„œ ì¸í„´ìœ¼ë¡œ ê·¼ë¬´í•˜ê³  ìˆëŠ”ë°ìš”. íšŒì‚¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” í…ìŠ¤íŠ¸ í‚¤ë¥¼ ì „ì²´ì ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” íƒœìŠ¤í¬ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤. í˜„ì¬ í…ìŠ¤íŠ¸ í‚¤ë¥¼ ê´€ë¦¬í•˜ê³  ìˆëŠ” jsoníŒŒì¼ì—ëŠ” ì‚¬ìš©ë˜ì§€ ì•Šê³  ìˆëŠ” í…ìŠ¤íŠ¸ í‚¤ë„ ë§ì•„ ì‚¬ìš© ì¤‘ì¸ í…ìŠ¤íŠ¸ í‚¤ë§Œ ëª¨ì•„ ì •ë¦¬í•´ì•¼ í–ˆê³ , ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬ë¶„ì—†ì´ í•˜ë‚˜ì˜ jsoníŒŒì¼ì— ëª¨ì•„ì ¸ìˆì—ˆê¸° ë•Œë¬¸ì— ê¸°ëŠ¥ë³„ë¡œ json íŒŒì¼ì„ ë¶„ë¦¬í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

ì½”ë“œì— ì‚¬ìš©ë˜ê³  ìˆëŠ” í…ìŠ¤íŠ¸ í‚¤ë¥¼ ëª¨ì•„ json íŒŒì¼ ë° êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ë¡œ ì •ë¦¬í•´ì•¼ í–ˆëŠ”ë°ìš”. ì„¤ë§ˆ ì´ê±¸ í•˜ë‚˜ í•˜ë‚˜ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€ ì°¾ê³ , í™•ì¸í•˜ì—¬, jsonì— ë„£ê³ , êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì— ë„£ì–´ì•¼í•˜ëŠ”ê±´ê°€â€¦?ë¼ëŠ” ì˜ë¬¸ì´ ë“¤ë©° ì´ëŸ° ì‹ìœ¼ë¡œ ì‘ì—…í–ˆë‹¤ê°„ íš¨ìœ¨ì´ ì „í˜€ ë‚˜ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤.

ì•„ë‹ˆë‚˜ ë‹¤ë¥¼ê¹Œ ì—­ì‹œ ê°œë°œìë“¤ì€ ë¹„íš¨ìœ¨ì„ ì°¸ì§€ ì•Šì£ ! ë°”ë¡œ í…ìŠ¤íŠ¸ í‚¤ ìë™í™”ë¥¼ ê²€ìƒ‰í•´ë³´ë‹ˆ ì´ë¯¸ ë§ì€ ë¶„ë“¤ì´ ìë™í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ì…í•˜ì…¨ë”ë¼êµ¬ìš”.

## ìë™í™”, ì™œ ë„ì…í•´ì•¼ í• ê¹Œ?

> ë³€í™”ì— ë¹ ë¥´ê²Œ ëŒ€ì‘í•˜ê¸°

ìš°ë¦¬ì˜ ì„œë¹„ìŠ¤ëŠ” ê°€ë§Œíˆ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ë³€í™”í•˜ëŠ” ì‹œì¥ìƒí™©ê³¼ ìœ ì €ì˜ ë‹ˆì¦ˆì— ë§ì¶° ê³„ì†í•´ì„œ ë³€í™”í•˜ê³  ë°œì „í•´ë‚˜ê°€ì•¼í•˜ì£ . ìš°ë¦¬ê°€ ê´€ë¦¬í•˜ê³ ì í•˜ëŠ” í…ìŠ¤íŠ¸ í‚¤ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. ì„œë¹„ìŠ¤ê°€ ë³€ëª¨í•¨ì— ë”°ë¼ ìƒˆë¡œìš´ í…ìŠ¤íŠ¸ í‚¤ê°€ ì¶”ê°€ë˜ê¸°ë„ í•˜ê³  ê¸°ì¡´ í…ìŠ¤íŠ¸ í‚¤ê°€ ìˆ˜ì •ë˜ê¸°ë„ í•˜ê² ì£ .

ì´ëŸ´ ë•Œ ê°€ëœ©ì´ë‚˜ ì¼ì •ì— ì‹œë‹¬ë¦¬ëŠ” ë§ˆë‹¹ì— í…ìŠ¤íŠ¸ í‚¤ë¥¼ í•œ ë•€ í•œ ë•€ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•´ì•¼í•œë‹¤ë©´? ê°œë°œìì—ê²Œ ì´ê²ƒë§Œí¼ ê³ í†µìŠ¤ëŸ¬ìš´ ê²ƒì€ ë˜ ì—†ì„ ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ë¹„íš¨ìœ¨ì ì¸ ì‘ì—…ì„ ì¤„ì´ë©´ ì¤„ì¼ìˆ˜ë¡ ìš°ë¦¬ëŠ” ë” ì¤‘ìš”í•œ ë¡œì§ì— ìš°ë¦¬ì˜ ì†Œì¤‘í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì“¸ ìˆ˜ ìˆê² ì£ !

> ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ì˜ ë¬¸ì œì 

ê¸°ì¡´ì—ëŠ” ìë™í™”ê°€ ë„ì…ë˜ì–´ ìˆì§€ ì•Šì•„ì„œ ì¼ì¼ì´ ìˆ˜ì‘ì—…ìœ¼ë¡œ ì •ë¦¬í•´ì•¼í•˜ëŠ” ìƒí™©ì´ì—ˆìŠµë‹ˆë‹¤.

1. UIë¥¼ êµ¬í˜„í•˜ë©° í…ìŠ¤íŠ¸ í‚¤ ì¶”ê°€, ìˆ˜ì • ì‚¬í•­ì´ ìƒê¸¸ ë•Œ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ë¥¼ ì§ì ‘ ìˆ˜ì •í•œë‹¤.
2. ë³€ê²½ì‚¬í•­ì„ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì— ë°˜ì˜í•œë‹¤.
3. êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì—ì„œ ë²ˆì—­ ì‘ì—…ì´ ì™„ë£Œë˜ë©´ jsoníŒŒì¼ì— ë°˜ì˜í•œë‹¤.

ì´ë ‡ê²Œ ì¼ì¼ì´ ì‚¬ëŒ ì†ìœ¼ë¡œ í•˜ë‹¤ë³´ë©´ ì‹¤ìˆ˜ê°€ ë°œìƒí•˜ê¸°ë„ ì‰½ê³ , ì†Œì¤‘í•œ ê°œë°œìë“¤ì˜ ë¦¬ì†ŒìŠ¤ê°€ ë‚­ë¹„ë˜ê² ì£ . (ì†Œì¤‘í•œ ë‚´ ì‹œê°„â€¦)

# êµ­ì œí™”? í…ìŠ¤íŠ¸ í‚¤? (react-i18next)

í˜„ì¬ react-i18nextë¥¼ ì‚¬ìš©í•´ ë‹¤êµ­ì–´ ì§€ì›ì„ êµ¬í˜„í•´ë†“ì€ ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

ê° ì–¸ì–´ì— ë”°ë¥¸ í…ìŠ¤íŠ¸ ê°’ì€ ì´ë ‡ê²Œ json íŒŒì¼ì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì‚¬ë‚´ í”„ë¡œì íŠ¸ì˜ ê²½ìš° `{ë„¤ì„ìŠ¤í˜ì´ìŠ¤}.{ì–¸ì–´ëª…}.json` ì˜ ì´ë¦„ ê·œì¹™ìœ¼ë¡œ json íŒŒì¼ì„ ìƒì„±í•´ë‘” ìƒíƒœì…ë‹ˆë‹¤.

```jsx
// namespace.en.json
{
	"exampleKey" : "example"
}

// namespace.ko.json
{
	"exampleKey" : "ì˜ˆì‹œ"
}

// namespace.ja.json
{
	"exampleKey" : "äºˆç¤º"
}
```

ì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ i18nextì˜ ì„¤ì •ì…ë‹ˆë‹¤. resources ë‚´ì—ëŠ” ì‚¬ìš©í•  ì–¸ì–´ë³„ë¡œ, ê·¸ë¦¬ê³  ì–¸ì–´ ë‚´ì—ì„œëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ë¡œ ì‚¬ìš©í•  jsonì„ ì •í•©ë‹ˆë‹¤.

```jsx
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import namespaceKo from '...';
import namespaceEn from '...';

i18n
  .use(initReactI18next)
  .use(LanguageDetector)
  .init({
    resources: {
      en: {
        namespace: exampleEn,
      },
      ko: {
        namespace: exampleKo,
      },
      ja: {
        namespace: exampleJa,
      },
    },
  });
```

ê·¸ëŸ¬ë©´ ë¦¬ì•¡íŠ¸ ì½”ë“œ ë‚´ì—ì„œ useTranslationì´ë¼ëŠ” í›…ì„ ì‚¬ìš©í•˜ì—¬ ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³„ë¡œ ë²ˆì—­ì„ ì„ íƒí•˜ì—¬(ì–¸ì–´ì˜ ê²½ìš° LanguageDetectorê°€ ì•Œì•„ì„œ ê°ì§€í•˜ì—¬ ê²°ì •í•´ì¤ë‹ˆë‹¤.) ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
// someComponent.tsx
function someComponent() {
  const { t } = useTranslation('namespace'); // ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê²°ì •

  return (
    <div>{t('exampleKey')}</div> // ê° ì–¸ì–´ì— ë§ê²Œ í•´ë‹¹ í‚¤ì™€ ëŒ€ì‘í•˜ëŠ” í…ìŠ¤íŠ¸ ê°’ì´ í™”ë©´ì— ì¶œë ¥ëœë‹¤.
  );
}
```

# íƒ€ ë¸”ë¡œê·¸ ê¸€ë¡œ í•´ê²°í•  ìˆ˜ ì—†ì—ˆë˜ ë¬¸ì œë“¤

ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë¸”ë¡œê·¸ ê¸€ì—ì„œëŠ” í•˜ë‚˜ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§Œ ë‹¤ë£¨ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ì‚¬ë‚´ í”„ë¡œì íŠ¸ì—ì„œëŠ” í´ë”êµ¬ì¡°ê°€ featureë³„ë¡œ ë‚˜ë‰˜ì–´ì ¸ìˆì—ˆê³ , ë²ˆì—­ íŒŒì¼ ë˜í•œ featureë³„ë¡œ ê´€ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì´ì— ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” ì½”ë“œê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

```jsx
ğŸ“¦src
â”£ ğŸ“‚common
â”ƒ â”£ ğŸ“‚locale // src/common/locale...
â”ƒ â”ƒ â”£ ğŸ“œi18n.json
â”ƒ â”ƒ â”£ ğŸ“œsettingi18n.ts
â”ƒ â”ƒ â”£ ğŸ“œtranslation.en.json
â”ƒ â”ƒ â”£ ğŸ“œtranslation.ja.json
â”ƒ â”ƒ â”— ğŸ“œtranslation.ko.json
â”£ ğŸ“‚features
â”ƒ â”£ ğŸ“‚feature1 // src/features/feature1/locale...
â”ƒ â”ƒ â”£ ğŸ“‚components
â”ƒ â”ƒ â”£ ğŸ“‚layout
â”ƒ â”ƒ â”£ ğŸ“‚locale
â”ƒ â”ƒ â”ƒ â”£ ğŸ“œfeature1.en.json
â”ƒ â”ƒ â”ƒ â”— ğŸ“œfeature1.ko.json
â”ƒ â”£ ğŸ“‚feature2 // src/features/feature2/locale...
â”ƒ â”ƒ â”£ ğŸ“‚components
â”ƒ â”ƒ â”£ ğŸ“‚layout
â”ƒ â”ƒ â”£ ğŸ“‚locale
â”ƒ â”ƒ â”ƒ â”£ ğŸ“œfeature2.en.json
â”ƒ â”ƒ â”ƒ â”— ğŸ“œfeature2.ko.json
//...
```

ìœ„ í´ë” êµ¬ì¡°ì™€ ê°™ì´ ê° í´ë” ë³„(common, feature1, feature2â€¦)ë¡œ ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì—¬ í…ìŠ¤íŠ¸ í‚¤ë¥¼ ê¸ì–´ì˜¤ê³ ,, ê° í´ë”ëª…ì„ ê°€ì§€ê³  json íŒŒì¼ì„ ìƒì„±í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

ë˜í•œ í˜„ì¬ í…ìŠ¤íŠ¸ í‚¤ê°€ ì¤‘ì²©ëœ í‚¤ ì •ë¦¬í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´,

```jsx
{
	"key1" : {
		"key2" : {
			"key3: "value",
			//...
		}
	}
}
```

```jsx
// someComponent.tsx
function someComponent() {
  const { t } = useTranslation();

  return <div>{t('key1.key2.key3')}</div>;
}
```

ì´ì²˜ëŸ¼ key1.key2.key3 ì´ëŸ° ì‹ìœ¼ë¡œ í‚¤ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ” ê°’ë“¤ì„ key3ë§Œ ì°¸ì¡°í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì •ë¦¬í•´ì•¼í–ˆìŠµë‹ˆë‹¤.

### ìš”êµ¬ ì‚¬í•­

1. ì‚¬ìš© ì¤‘ì¸ í…ìŠ¤íŠ¸ í‚¤ ìŠ¤ìº”í•˜ì—¬ ì •ë¦¬ : ê° feature í´ë”ì™€ common í´ë” ë³„ë¡œ í•´ë‹¹ í´ë” ì•ˆì—ì„œ ì‚¬ìš© ì¤‘ì¸ í…ìŠ¤íŠ¸ í‚¤ë¥¼ ìŠ¤ìº”í•œë‹¤.
2. í´ë” ë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë²ˆì—­ íŒŒì¼ ìƒì„± : ê° í´ë”ëª…ì„ ê¸°ë°˜ìœ¼ë¡œ json íŒŒì¼ì„ ìƒì„±í•˜ì—¬ í•´ë‹¹ í´ë”ì˜ locale í´ë”ì— ë„£ëŠ”ë‹¤.
3. ì¤‘ì²© í‚¤ë¥¼ ì •ë¦¬ : ì‚¬ìš© ì¤‘ì¸ í…ìŠ¤íŠ¸ í‚¤ê°€ ëª¨ë‘ ì •ë¦¬ê°€ ëœ ìƒíƒœì—ì„œ, jsoníŒŒì¼ ê·¸ë¦¬ê³  ì½”ë“œë¥¼ ìˆœíšŒí•˜ë©° ì¤‘ì²©ëœ í‚¤ë¥¼ ì •ë¦¬í•˜ì—¬ ì½”ë“œì™€ json íŒŒì¼ ì–‘ìª½ì— ëª¨ë‘ ì ìš©

í•˜ì§€ë§Œ ë‹¤ë¥¸ ë¸”ë¡œê·¸ ê¸€ì—ì„œëŠ” ì´ëŸ° ë°©ë²•ì„ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ ì–¸ê¸‰í•˜ê³  ìˆëŠ” ê¸€ì´ ì—†ì—ˆìŠµë‹ˆë‹¤. êµ¬í˜„í•´ë†“ì€ ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ë‹¨ìˆœíˆ ì˜¬ë ¤ë†“ì€ ê¸€ë“¤ì´ ë§ì•˜ê¸° ë•Œë¬¸ì— ë¸”ë¡œê·¸ ê¸€ ë§Œìœ¼ë¡œ ë°©ë²•ì„ ì°¾ê¸°ëŠ” ì–´ë ¤ì› ìŠµë‹ˆë‹¤.

# í•´ê²°ë°©ë²• : Namespaces

ì´ ìƒí™©ì—ì„œ ì ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ê¸° ìœ„í•´ 18nextì˜ ê³µì‹ë¬¸ì„œë¥¼ ì‚´í´ë´¤ìŠµë‹ˆë‹¤.

[Namespaces](https://www.i18next.com/principles/namespaces)

NamespaceëŠ” ìœ„ì—ì„œ ì„¤ëª…í•˜ë©´ì„œ ì ê¹ ì–¸ê¸‰í•˜ê¸°ë„ í–ˆëŠ”ë°ìš”. i18nextì˜ ê³µì‹ë¬¸ì„œì—ì„œ ì„¤ëª…í•˜ê³  ìˆëŠ” NamespaceëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

> Namespaces are a feature in i18next internationalization framework which allows you to separate translations that get loaded into multiple files.

> NamespaceëŠ” i18 next êµ­ì œí™” í”„ë ˆì„ì›Œí¬ì˜ ê¸°ëŠ¥ìœ¼ë¡œ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë‚˜ëˆ„ì–´ ë²ˆì—­ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í™œìš©í•´ì„œ ì½”ë“œ ìŠ¤ìº”ì‹œ í´ë”ëª…ì„ ê°€ì ¸ì™€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ ì§€ì •í•˜ê³  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— í•´ë‹¹í•˜ëŠ” í´ë”ì— json íŒŒì¼ì„ ìƒì„±í•˜ì—¬ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

## ì˜ˆì‹œ ì½”ë“œ

### i18nextì—ì„œì˜ namespaces

namespaceë¥¼ í™œìš©í•˜ëŠ” ì˜ˆì‹œë¡œ ì•„ë˜ì™€ ê°™ì€ ì„¤ëª…ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ë¨¼ì € namespace ë³„ë¡œ ë²ˆì—­ íŒŒì¼(json)ì„ ë¶„ë¦¬í•˜ì—¬ ì‘ì„±í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

```jsx
common.json -> ì—¬ëŸ¬êµ°ë°ì—ì„œ ì¬ì‚¬ìš©ë˜ëŠ” ê²ƒë“¤, eg. Button labels 'save', 'cancel'
validation.json -> ëª¨ë“  ìœ íš¨ì„± ê²€ì‚¬ í…ìŠ¤íŠ¸
glossary.json -> í…ìŠ¤íŠ¸ ë‚´ì—ì„œ ì¼ê´€ì„± ìˆê²Œ ì¬ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ë‹¨ì–´
```

ë˜í•œ namespaceë¥¼ ì–´ë–¤ ê¸°ì¤€ìœ¼ë¡œ ë¶„ë¦¬í•˜ë©´ ì¢‹ì„ì§€ì— ëŒ€í•œ ì˜ˆì‹œë„ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.

- view/page ë‹¨ìœ„ì˜ namespace
- application section/feature set ë‹¨ìœ„ì˜ namespace
- lazy ë¡œë”©ë˜ëŠ” ëª¨ë“ˆ ë‹¨ìœ„ì˜ namespace

i18nextì˜ ê¸°ë³¸ ì„¤ì •íŒŒì¼ì—ì„œ namespaceì— ëŒ€í•œ ì„¤ì •ì„ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
i18next.init(
  {
    ns: ['common', 'moduleA', 'moduleB'], // ì‚¬ìš©í•  ë„¤ì„ìŠ¤í˜ì´ìŠ¤
    defaultNS: 'moduleA', // ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  },
  (err, t) => {
    i18next.t('myKey'); // ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì¸ 'moduleA'ì—ì„œ ë²ˆì—­ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
    i18next.t('myKey', { ns: 'common' }); // common ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ë²ˆì—­ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
  }
);
```

ì´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì–´ë–»ê²Œ í™œìš©í• ì§€ëŠ” ì´ì œ ì‹¤ì œë¡œ êµ¬í˜„ëœ ì½”ë“œë¥¼ ë³´ë©´ì„œ í™•ì¸í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

# ìë™í™” êµ¬í˜„

## ìš”êµ¬ì‚¬í•­ ë° ë„êµ¬

### ê¸°ëŠ¥

êµ¬í˜„í•œ ìë™í™” ê¸°ëŠ¥ì€ í¬ê²Œ 3ê°€ì§€ ì…ë‹ˆë‹¤.

1. ìŠ¤ìº” : ì½”ë“œì— ì‚¬ìš©ë˜ê³  ìˆëŠ” í…ìŠ¤íŠ¸ í‚¤ë¥¼ ìŠ¤ìº”í•˜ì—¬ í´ë” ë³„ë¡œ json íŒŒì¼ë¡œ ì •ë¦¬
2. ì—…ë¡œë“œ : ìƒì„±ëœ json íŒŒì¼ì„ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì— ì—…ë¡œë“œ
3. ë‹¤ìš´ë¡œë“œ : êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì˜ ë‚´ìš©ì„ ë°›ì•„ json íŒŒì¼ì— ë°˜ì˜

### ì‚¬ìš©í•  ë„êµ¬

- i18next-scanner : ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ê³  ë²ˆì—­ í‚¤/ê°’ì„ ì¶”ì¶œí•˜ì—¬ i18n ë¦¬ì†ŒìŠ¤ íŒŒì¼ë¡œ ë³‘í•©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
- google-spreadsheet : javascript / typescriptìš© Google Sheets API ë¼ì´ë¸ŒëŸ¬ë¦¬
- fs ëª¨ë“ˆ : Nodeì—ì„œ ì‚¬ìš©í•˜ëŠ” íŒŒì¼ì‹œìŠ¤í…œ ëª¨ë“ˆ (íŒŒì¼ì„ ì½ê³  ì“°ëŠ” ì‘ì—…)
- path ëª¨ë“ˆ : í´ë”ì™€ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì¡°ì‘í•˜ëŠ” ëª¨ë“ˆ

### ìŠ¤í¬ë¦½íŠ¸

ê° ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•„ë˜ì²˜ëŸ¼ package.jsonì— ë„£ì–´ë†“ê³  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
// package.json
{
		// ì½”ë“œì— ì‚¬ìš© ì¤‘ì¸ í…ìŠ¤íŠ¸ í‚¤ë¥¼ ìŠ¤ìº”í•˜ì—¬ jsonì— ë°˜ì˜
		"scan:i18n": "i18next-scanner --config src/translation/i18next-scanner.config.js",
		// êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì˜ ë‚´ìš©ì„ ë°›ì•„ jsonì— ë°˜ì˜
		"download:i18n": "node src/translation/download.js",
		// jsonì˜ ë‚´ìš©ì„ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì— ë°˜ì˜
		"upload:i18n": "node src/translation/upload.js"
}
```

## ì‚¬ìš© ì¤‘ì¸ í…ìŠ¤íŠ¸ í‚¤ ìŠ¤ìº”í•˜ê¸° : i18next-scanner

ê±°ë‘ì ˆë¯¸í•˜ê³  ìµœì¢…ì ìœ¼ë¡œ êµ¬í˜„í•œ ì½”ë“œë¥¼ ë³´ë©° ì„¤ëª…í•´ë³´ê² ìŠµë‹ˆë‹¤. i18next-scanner ì˜µì…˜ì— ëŒ€í•´ì„  ì•„ë˜ ê¹ƒí—™ ê³µì‹ ë ˆí¬ì§€í† ë¦¬ì—ì„œ ì„¤ëª…í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ê°œì¸ ì…ë§›ì— ë§ê²Œ êµ¬ì„±í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì œ ì½”ë“œëŠ” ì°¸ê³ ë§Œ í•´ì£¼ì„¸ìš”.

[https://github.com/i18next/i18next-scanner#default-options](https://github.com/i18next/i18next-scanner#default-options)

```jsx
// src/translation/i18next-scanner.config.js
const path = require('path');

const COMMON_EXTENSIONS = '/**/*.{js,jsx,ts,tsx,vue,html}';

const translationKo = require('../common/locale/translation.ko.json');
const translationEn = require('../common/locale/translation.en.json');
const translationJa = require('../common/locale/translation.ja.json');

const homeKo = require('../features/home/locale/home.ko.json');
const homeEn = require('../features/home/locale/home.en.json');

const controlKo = require('../features/control/locale/control.ko.json');
const controlEn = require('../features/control/locale/control.en.json');

// feature í´ë” ì¤‘ control, home í´ë”ì—ì„œ ì°¸ì¡°í•˜ê³  ìˆëŠ” ë²ˆì—­ íŒŒì¼
const featureTrans = {
  home: {
    ko: homeKo,
    en: homeEn,
  },
  control: {
    ko: controlKo,
    en: controlEn,
  },
};

// control, homeì„ ì œì™¸í•˜ê³  ëª¨ë“  ê³³ì—ì„œ ì°¸ì¡°í•˜ê³  ìˆëŠ” ë²ˆì—­ íŒŒì¼
const commonTrans = {
  ko: translationKo,
  en: translationEn,
  ja: translationJa,
};

module.exports = {
  // ìŠ¤ìº”í•  ìœ„ì¹˜ ì§€ì •
  input: [
    // í¬í•¨í•  ê²½ë¡œ
    `./src/features/${COMMON_EXTENSIONS}`,

    // ì œì™¸í•  ê²½ë¡œ
    `!./src/features/notification/${COMMON_EXTENSIONS}`,
    `!./src/features/agent/${COMMON_EXTENSIONS}`,
    `!./src/features/statistics/${COMMON_EXTENSIONS}`,
  ],

  options: {
    // default valuesë¥¼ ì²´í¬í•  ë•Œ ì‚¬ìš©í•  ë””í´íŠ¸ ì–¸ì–´
    defaultLng: 'ko',
    // ì‚¬ìš©í•˜ê³  ìˆëŠ” ì–¸ì–´ë“¤
    lngs: ['ko', 'en'],
    func: {
      // ìŠ¤ìº”í•  ëŒ€ìƒ í•¨ìˆ˜
      list: ['t'],
      // ìŠ¤ìº”í•  ëŒ€ìƒ íŒŒì¼ë“¤ì˜ í™•ì¥ì
      extensions: ['.js', '.jsx', '.ts', '.tsx'],
    },

    resource: {
      loadPath: 'src/features/{{ns}}/locales/{{ns}}.{{lng}}.json',
      savePath: 'src/features/{{ns}}/locales/{{ns}}.{{lng}}.json',
    },

    // ì‚¬ìš©í•  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ëª©ë¡
    ns: [
      'control',
      'eum',
      'home',
      'license',
      'project',
      'setting',
      'signin',
      'usage',
      'vwr',
    ],

    // ê°’ì„ ì§€ì •í•˜ëŠ” ë¡œì§ ë¶€ë¶„
    defaultValue(lng, ns, key) {
      const separator = '.';
      const [a, b, c, d, e] = key.split(separator); // ì¤‘ì²© í‚¤ê°€ ì‚¬ìš©ëœ ê²½ìš°ë“¤ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•¨

      let value;

      // control, home í´ë”ì˜ ê²½ìš° ì°¸ì¡°í•´ì•¼í•˜ëŠ” ë²ˆì—­ íŒŒì¼ì´ ë‹¬ë¼ ë¶„ê¸°ì²˜ë¦¬
      if (['control', 'home'].includes(ns)) {
        if (c && !d) {
          value =
            featureTrans[ns][lng][a] &&
            featureTrans[ns][lng][a][b] &&
            featureTrans[ns][lng][a][b][c]
              ? featureTrans[ns][lng][a][b][c]
              : commonTrans[lng][a][b][c];
        } else if (b && !c) {
          value =
            featureTrans[ns][lng][a] && featureTrans[ns][lng][a][b]
              ? featureTrans[ns][lng][a][b]
              : commonTrans[lng][a][b];
        } else if (a && !b) {
          value = featureTrans[ns][lng][a]
            ? featureTrans[ns][lng][a]
            : commonTrans[lng][a];
        }
      } else {
        if (e) {
          value = commonTrans[lng][a][b][c][d][e];
        } else if (d && !e) {
          value = commonTrans[lng][a][b][c][d];
        } else if (c && !d) {
          value = commonTrans[lng][a][b][c];
        } else if (b && !c) {
          value = commonTrans[lng][a][b];
        } else {
          value = commonTrans[lng][a];
        }
      }

      return value;
    },
    keySeparator: false,
    nsSeparator: false,
    prefix: '%{',
    suffix: '}',
  },

  // íŒŒì¼ì´ ìœ„ì¹˜í•œ í´ë” ëª…ì— ë”°ë¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì§€ì •í•´ì£¼ëŠ” ë¡œì§
  transform: function customTransform(file, enc, done) {
    const { parser } = this;
    // í´ë”ëª… ê°€ì ¸ì˜¤ê¸°
    const featureName = file.path.split(path.sep).slice(-3, -2)[0];

    parser.parseFuncFromString(
      file.contents.toString(enc),
      { list: ['t'] },
      (key, options) => {
        // í´ë”ëª…ìœ¼ë¡œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì „ë‹¬í•˜ê¸°
        parser.set(key, { ...options, ns: featureName });
      }
    );

    done();
  },
};
```

defaultValue ì˜µì…˜ì—ì„œ í…ìŠ¤íŠ¸ í‚¤ì˜ ê°’ì„ ì§€ì •í•˜ëŠ” ë¡œì§ì„ ì‘ì„±í–ˆê³ , transform ì˜µì…˜ì—ì„œ ê° í´ë”ì— ë”°ë¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì§€ì •í•´ì£¼ëŠ” ë¡œì§ì„ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

- defaultValue : `parser.set`ì— ê°’ì´ ì „ë‹¬ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë  ê°’ì„ ì§€ì •í•˜ëŠ” ì˜µì…˜
- transform : ìŠ¤ìº”ë˜ëŠ” íŒŒì¼ë“¤ì„ ì»¤ìŠ¤í…€í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ì˜µì…˜, ìŠ¤ìºë„ˆê°€ ì½”ë“œë¥¼ ì½ê³  í•´ì„í•˜ëŠ” ë°©ë²•ì„ ì¡°ì‘í•˜ì—¬ ë²ˆì—­ í‚¤ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤.

ë¸”ë¡œê·¸ ê¸€ì„ ì“°ë©´ì„œ ë‹¤ì‹œ ë³´ë‹ˆ ëª¨ë“  ë¡œì§ì„ tranform ì˜µì…˜ì—ì„œ ì‚¬ìš©í•´ë„ ë  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“œë„¤ìš”.

## êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ ì—°ë™í•˜ê¸°

ì´ì œ ì½”ë“œ ë‹¨ì—ì„œ ì‚¬ìš© ì¤‘ì¸ í…ìŠ¤íŠ¸ í‚¤ë¥¼ ëª¨ë‘ ì •ë¦¬í–ˆìœ¼ë‹ˆ ì •ë¦¬ëœ json íŒŒì¼ì˜ ë‚´ìš©ì„ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì— ì˜¬ë¦´ ì°¨ë¡€ì…ë‹ˆë‹¤.

ì•ì„œ ë§ì”€ë“œë¦° ê²ƒì²˜ëŸ¼ ê° featureë³„ë¡œ json ë²ˆì—­ íŒŒì¼ì„ ê´€ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì˜ ê²½ìš°ì—ë„ ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë§ˆë‹¤ ì‹œíŠ¸ë¥¼ ì‘ì„±í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

ì´ë¥¼ ìœ„í•´ ë¯¸ë¦¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³„ë¡œ ì‹œíŠ¸ë¥¼ ë§Œë“¤ì–´ë†“ê³ , ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³„ ì‹œíŠ¸ì˜ sheetIdë¥¼ ê°€ì§€ê³  ê° ë²ˆì—­ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆê²Œ ì½”ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

### êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •

ê¸°ë³¸ì ìœ¼ë¡œ êµ¬ê¸€ APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  Google Cloud Platformì—ì„œ API ì„¤ì •ì„ í•´ì•¼í•˜ëŠ”ë°ìš”. ì´ ì„¤ì •ë°©ë²•ì— ëŒ€í•´ì„œ ì˜ ì„¤ëª…í•˜ê³  ìˆëŠ” ë¸”ë¡œê·¸ ê¸€ì´ ë§ìœ¼ë‹ˆ ì•„ë˜ ê¸€ ì°¸ê³ í•´ì„œ ë¹„ê³µê°œ í‚¤ JSONì„ ë°›ìœ¼ë©´ ê¸°ë³¸ì ì¸ ì„¤ì •ì€ ëë‹™ë‹ˆë‹¤!

[https://sojinhwan0207.tistory.com/200](https://sojinhwan0207.tistory.com/200)

í•´ë‹¹ í‚¤ë¥¼ í†µí•´ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ API ì‚¬ìš©í•  ë•Œ ì¸ì¦ì„ í•´ì•¼í•©ë‹ˆë‹¤.

### ê¸°ë³¸ ì„¤ì • íŒŒì¼ : index.js

upload.js, download.jsì—ì„œ ëª¨ë‘ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ê°’ì´ë‚˜ ë¡œì§ì€ index.jsì— ì‘ì„±í•˜ì—¬ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

```jsx
// src/translation/index.js
const fs = require('fs');
const path = require('path');
const { GoogleSpreadsheet } = require('google-spreadsheet');
const { JWT } = require('google-auth-library'); // êµ¬ê¸€ ì¸ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬

// Google Cloud Platformì—ì„œ ë°›ì€ í‚¤ íŒŒì¼ì˜ ìœ„ì¹˜
const creds = require('./.credentials/~.json');

// ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ ì•„ì´ë””
const spreadsheetDocId = '...';
const ns = [
  'control',
  'eum',
  'home',
  'license',
  'project',
  'setting',
  'signin',
  'usage',
  'vwr',
  'common',
  'agent',
  'statistics',
];
const lngs = ['en', 'ko', 'ja'];

// ìŠ¤ìº” í˜¹ì€ ë‹¤ìš´ë°›ì„ ê²½ë¡œë¥¼ ìœ„í•œ ê°’ë“¤
const srcPath = './src';
const featuresPath = path.join(srcPath, 'features');
const commonPath = path.join(srcPath, 'common');

// ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³„ ì‹œíŠ¸ ì•„ì´ë””
const sheetIdForNamespaces = {
  agent: 0,
  control: 1417978718,
  eum: 1133616245,
  home: 1089626816,
  license: 979596039,
  notification: 1130312388,
  project: 1297171255,
  setting: 2072120756,
  signin: 1666983927,
  statistics: 1713887317,
  usage: 1701897416,
  vwr: 265110534,
  plan: 459633795,
  common: 1476533780,
};

// ë²ˆì—­ íŒŒì¼(json)ì´ ìœ„ì¹˜í•˜ê²Œ ëª¨ë“  ê²½ë¡œë¥¼ ë¯¸ë¦¬ ë¶ˆëŸ¬ì™€ ë°˜ë³µë¬¸ì„ ëŒë ¤ ì‚¬ìš©í•  ì˜ˆì •
const localePathForNamespaces = getAllLocalePaths();

// êµ¬ê¸€ API ì¸ì¦
const serviceAccountAuth = new JWT({
  email: creds.client_email,
  key: creds.private_key,
  scopes: ['https://www.googleapis.com/auth/spreadsheets'],
});

async function loadSpreadsheet() {
  console.info(
    '\u001B[32m',
    '=====================================================================================================================\n',
    '# i18next auto-sync using Spreadsheet\n\n',
    '  * Download translation resources from Spreadsheet and make /src/locales//.json\n',
    '  * Upload translation resources to Spreadsheet.\n\n',
    `The Spreadsheet for translation is here (\u001B[34mhttps://docs.google.com/spreadsheets/d/${spreadsheetDocId}/#gid=0\u001B[0m)\n`,
    '=====================================================================================================================',
    '\u001B[0m'
  );

  const doc = new GoogleSpreadsheet(spreadsheetDocId, serviceAccountAuth);

  await doc.loadInfo();

  return doc;
}

function getAllLocalePaths() {
  const localePathForNamespaces = {};

  localePathForNamespaces.common = path.join(commonPath, 'locale');

  const features = fs
    .readdirSync(featuresPath, { withFileTypes: true })
    .filter((dirent) => dirent.isDirectory())
    .map((dirent) => dirent.name);

  features.forEach((featureDir) => {
    const localePath = path.join(featuresPath, featureDir, 'locale');
    const fearueName = featureDir.split('/')[0];
    if (fs.existsSync(localePath) && fs.lstatSync(localePath).isDirectory()) {
      localePathForNamespaces[`${fearueName}`] = localePath;
    }
  });

  return localePathForNamespaces;
}

module.exports = {
  loadSpreadsheet,
  getAllLocalePaths,
  localePathForNamespaces,
  sheetIdForNamespaces,
  ns,
  lngs,
  columnKeyToHeader,
};
```

### json íŒŒì¼ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì— ì—…ë¡œë“œí•˜ê¸° : upload.js

ë‚´ì¥ ëª¨ë“ˆì¸ fs, pathë¥¼ ì‚¬ìš©í•œ ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì´ë‹ˆ, ì‘ì„±ëœ ì½”ë“œë¥¼ ì²œì²œíˆ ì½ì–´ë³´ì‹œë©´ í¬ê²Œ ì–´ë µì§€ ì•Šê²Œ ì´í•´í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ê°œì¸ í”„ë¡œì íŠ¸ì˜ ìƒí™©ì— ë§ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ë˜ë©°, êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ë¥¼ ì–´ë–»ê²Œ ì¡°ì‘í• ì§€ëŠ” ê³µì‹ ë¬¸ì„œë¥¼ í™•ì¸í•˜ë©° ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

[https://github.com/theoephraim/node-google-spreadsheet](https://github.com/theoephraim/node-google-spreadsheet)

ì € ê°™ì€ ê²½ìš° ì°¸ê³ í–ˆë˜ ë¸”ë¡œê·¸ì˜ ì½”ë“œì™€ ë‹¤ë¥´ê²Œ google-spreadsheetì˜ ë©”ì„œë“œê°€ ì—…ë°ì´íŠ¸ë˜ì–´ ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ê¼­ ê³µì‹ë¬¸ì„œë¥¼ ë³´ëŠ” ê±¸ ì¶”ì²œí•©ë‹ˆë‹¤!

```jsx
// src/translation/upload.js
const fs = require('fs');
const path = require('path');
const {
  lngs,
  loadSpreadsheet,
  ns,
  localePathForNamespaces,
  sheetIdForNamespaces,
  headerValues,
} = require('./index');

// sheetê°€ ì—†ëŠ” ê²½ìš° sheetë¥¼ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
async function addNewSheet(doc, title, sheetId) {
  const sheet = await doc.addSheet({
    sheetId,
    title,
    headerValues,
  });

  return sheet;
}

// jsonì˜ ë‚´ìš©ì„ google-spreadsheetê°€ ì „ë‹¬ë°›ì•„ì•¼í•˜ëŠ” ë°ì´í„°ì— ë§ê²Œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
function getRowsFromJson(object) {
  const rowsFromJson = {}; // [key] : {key: string, ko: string, en:string }

  for (const [lng, obj] of Object.entries(object)) {
    for (const [key, val] of Object.entries(obj)) {
      rowsFromJson[key] = rowsFromJson[key]
        ? { ...rowsFromJson[key], [lng]: val }
        : { key: key, [lng]: val };
    }
  }

  return rowsFromJson;
}

// jsonì˜ keyê°€ ì‹œíŠ¸ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
function isExistInSheet(rows, key) {
  let answer;
  for (const row of rows) {
    if (row.get('key') === key) return true;
  }
  return answer;
}

// ì‹œíŠ¸ ìƒì—ì„œ ì–´ë–¤ keyì˜ í–‰ ë²ˆí˜¸ë¥¼ ì°¾ëŠ” í•¨ìˆ˜
function getIdxOfKey(rows, key) {
  for (let i = 0; i < rows.length; i++) {
    const row = rows[i];
    if (row.get('key') === key) return i;
  }
}

// jsonì˜ ë‚´ìš©ì„ ë°˜ì˜í•˜ì—¬ ì‹œíŠ¸ì˜ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
async function updateSheetFromJson(doc, object, sheetId) {
  const rowsFromJson = Object.values(getRowsFromJson(object)); // [ {key: string, ko: string, en:string }, ... ]

  let sheet = doc.sheetsById[sheetId];

  if (!sheet) {
    sheet = await addNewSheet(doc, title, sheetId);
  }

  const rows = await sheet.getRows();

  for (const rowFromJson of rowsFromJson) {
    const key = rowFromJson.key;

    if (isExistInSheet(rows, key)) {
      const idx = getIdxOfKey(rows, key);
      rows[idx].assign(rowFromJson);
      await rows[idx].save();
    } else {
      await sheet.addRow(rowFromJson);
    }
  }
}

// ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ jsoníŒŒì¼ì˜ ê²½ë¡œë¥¼ ë°›ì•„ json íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” í•¨ìˆ˜
function getJsonFilesForEachNamespace(localePath) {
  const localeJsons = {};

  const localefiles = fs.readdirSync(localePath);
  for (const localefile of localefiles) {
    if (!ns.includes(localefile.split('.')[0])) continue;

    const [namespace, lng] = localefile.split('.');

    const localeFilePath = path.join(localePath, localefile);
    const fileContents = fs.readFileSync(localeFilePath, 'utf8');
    const json = JSON.parse(fileContents);

    localeJsons[lng] = json;
  }

  return localeJsons;
}

// ëª¨ë“  lngì˜ json ë‚´ìš©ì„ ëª¨ì•„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ë§Œë“œëŠ” í•¨ìˆ˜
async function getRowsForNamespaceFromJson(localePath) {
  /**
   * lngMap = { [lng] : { key : value }, ... }
   */
  const lngMap = new Map();
  lngs.forEach((lng) => lngMap.set(lng, {}));

  const jsons = getJsonFilesForEachNamespace(localePath);

  for (const [lng, json] of Object.entries(jsons)) {
    for (const [key, val] of Object.entries(json)) {
      lngMap.get(lng)[key] = val;
    }
  }

  return lngMap;
}

async function main() {
  const doc = await loadSpreadsheet();

  // ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³„ë¡œ íŒŒì¼ì„ ì½ê³  ì‹œíŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë¡œì§ì„ ë°˜ë³µ ìˆ˜í–‰
  for (const [namespace, localePath] of Object.entries(
    localePathForNamespaces
  )) {
    if (namespace === 'plan') continue;

    console.log('namespace :', namespace);
    console.log('localePath :', localePath);

    const sheetId = sheetIdForNamespaces[namespace];
    const lngMap = await getRowsForNamespaceFromJson(localePath);
    const object = Object.fromEntries(lngMap);

    await updateSheetFromJson(doc, object, sheetId);

    console.log('done!');
    console.log();
  }
}

main();
```

### êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ì˜ ë‚´ìš© json íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œë°›ê¸° : download.js

download ë¡œì§ ë˜í•œ uploadì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤. uploadì—ì„œ í–ˆë˜ ê³¼ì •ì„ ê±°ê¾¸ë¡œ í•˜ëŠ” ê²ƒì´ë‚˜ ë§ˆì°¬ê°€ì§€ì´ê¸° ë•Œë¬¸ì— ì´ ë˜í•œ ê°œì¸ì˜ ìƒí™©ì— ë§ê²Œ ì‘ì„±í•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. upload ë¡œì§ì„ ì™„ì„±í–ˆë‹¤ë©´ downloadëŠ” ê¸ˆë°© ì‰½ê²Œ ì‘ì„±í•˜ì‹¤ ìˆ˜ ìˆì„ê²ë‹ˆë‹¤!

```jsx
// src/translation/download.js
const fs = require('fs');
const path = require('path');
const {
  lngs,
  loadSpreadsheet,
  ns,
  localePathForNamespaces,
  sheetIdForNamespaces,
} = require('./index');

// ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ jsoníŒŒì¼ì˜ ê²½ë¡œë¥¼ ë°›ì•„ json íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” í•¨ìˆ˜
function getJsonFilesForEachNamespace(localePath) {
  const localeJsons = {};

  const localefiles = fs.readdirSync(localePath);

  for (const localefile of localefiles) {
    if (!ns.includes(localefile.split('.')[0])) continue;

    const [namespace, lng] = localefile.split('.');

    const localeFilePath = path.join(localePath, localefile);
    const fileContents = fs.readFileSync(localeFilePath, 'utf8');
    const json = JSON.parse(fileContents);

    localeJsons[lng] = json;
  }

  return localeJsons;
}

// ê° ë²ˆì—­ íŒŒì¼ ê²½ë¡œì— json íŒŒì¼ì„ ë‹¤ì‹œ ì“°ëŠ” í•¨ìˆ˜
async function rewriteJsonToLocalPath(object, localePath, namespace) {
  lngs.forEach((lng) => {
    const localeFilePath = path.join(localePath, `${namespace}.${lng}.json`);
    const jsonString = JSON.stringify(object[lng], null, 2);

    fs.writeFileSync(localeFilePath, jsonString, 'utf8', (err) => {
      if (err) throw err;
    });
  });
}

// ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ êµ¬ê¸€ ìŠ¤í”„ë ˆë“œ ì‹œíŠ¸ë¡œë¶€í„° í•˜ë‚˜ì˜ ê°ì²´ë¥¼ ë§Œë“œëŠ” í•¨ìˆ˜
async function getLngMapForNamespaceFromSheet(doc, sheetId, localePath) {
  /**
   * lngMap = { [lng] : { key : value }, ... }
   */
  const lngMap = new Map();
  lngs.forEach((lng) => lngMap.set(lng, {}));

  const jsons = getJsonFilesForEachNamespace(localePath);

  const sheet = doc.sheetsById[sheetId];
  if (!sheet) return {};

  const rows = await sheet.getRows();

  rows.forEach((row) => {
    const key = row.get('key');

    lngs.forEach((lng) => {
      let value = row.get(`${lng}`);
      if (value) value = value.replace(/\\n/g, '\n');
      lngMap.set(lng, { ...lngMap.get(lng), [key]: value || '' });
    });
  });

  for (const [lng, json] of Object.entries(jsons)) {
    for (const [key, val] of Object.entries(json)) {
      lngMap.get(lng)[key] = lngMap.get(lng)[key] || val;
    }
  }

  return lngMap;
}

async function main() {
  const doc = await loadSpreadsheet();

  // ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë³„ë¡œ ì‹œíŠ¸ë¥¼ ì½ê³  íŒŒì¼ì„ ì“°ëŠ” ë¡œì§ì„ ë°˜ë³µ ìˆ˜í–‰
  for (const [namespace, sheetId] of Object.entries(sheetIdForNamespaces)) {
    if (namespace === 'plan') continue;

    console.log('namespace :', namespace);

    const localePath = localePathForNamespaces[namespace];
    const lngMap = await getLngMapForNamespaceFromSheet(
      doc,
      sheetId,
      localePath
    );
    const object = Object.fromEntries(lngMap);

    await rewriteJsonToLocalPath(object, localePath, namespace);

    console.log('done!');
    console.log();
  }
}

main();
```

# ë§ˆì¹˜ë©°

ìŠ¤ìº”ì˜ ê²½ìš° ê° í´ë” ë³„ë¡œ 1ì´ˆë„ ê±¸ë¦¬ì§€ ì•ŠëŠ” ë¹ ë¥¸ ì†ë„ë¡œ êµ‰ì¥í•œ íš¨ìœ¨ì„ ë‚¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì‹¤ë¬´ë¥¼ í•˜ë©´ì„œ ëŒ€ëŸ‰ì˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ê´€ë¦¬í•˜ë‹¤ ë³´ë©´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•  ì¼ì´ ë˜ ìˆì„ ê²ƒ ê°™ì€ë°, ì´ë²ˆì— fsì™€ path ëª¨ë“ˆì„ ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆë˜ ê¸°íšŒì˜€ìŠµë‹ˆë‹¤.

ì´ë ‡ê²Œ ë¹ ë¥¸ íš¨ìœ¨ì„ ë‚¼ ìˆ˜ ìˆëŠ” ì½”ë“œì˜ í˜ì„ ëŠë‚„ ìˆ˜ ìˆì—ˆê³ , ì–´ë–¤ íƒœìŠ¤í¬ë¥¼ ëŒ€í•˜ë”ë¼ë„ í•­ìƒ ê³ íš¨ìœ¨ì„ ë‚¼ ìˆ˜ ìˆë„ë¡ ë„êµ¬ë“¤ì„ ì˜ ì‚¬ìš©í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. íš¨ìœ¨ì ìœ¼ë¡œ ì¼í•˜ì!
